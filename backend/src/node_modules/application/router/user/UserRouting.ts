import {Routing} from "../../Routing";
import {MakeUserCommandSystem} from "application/system/UserCommandSystem";
import {MakeUserQuerySystem} from "application/system/UserQuerySystem";

export default class UserRouting implements Routing {
    public handlers() {
        return {
            createUser: (req: any) => {
                const userData = {
                    username: req.body.firstName + " " + req.body.lastName,
                    password: req.body.password,
                    email: req.body.email
                };
                return MakeUserCommandSystem().createUser(userData);
            },
            validateUser: (req: any) => {
                return MakeUserQuerySystem().validateUser(req.body.email, req.body.password);
            }
        };
    }

    public fillRoutes(router: any, handlers: any) {
        router.post("/register", handlers.createUser);
        router.post("/login", handlers.validateUser);
        /**/
    }
}
